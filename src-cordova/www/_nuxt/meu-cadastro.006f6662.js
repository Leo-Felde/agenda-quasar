import{_ as w,r as i,z as N,c as g,o as C,k,A as B,s as r,B as D,q as s,m as v,v as p,H as S,E as z,D as E}from'./entry.262740d5.js';import{f as b,m as h,_ as U}from'./usuarios.bd8c83a0.js';import{i as V,s as j,c as q,d as A}from'./promptDialog.55ad8c7a.js';import{a as M,s as x,_ as R}from'./index.a988fc85.js';import'./ClosePopup.8a3daebd.js';const T={setup(){const c=i(!1),t=i(!1),d=i(null),a=i({}),o=i({}),y=N(),n=g(()=>c.value?!V(o.value,a.value):!1),m=async()=>{if(d.value.validate()){if(!n.value){l();return}try{const e={usuario:a.value};e.usuario.dataNascimento=b(e.usuario.dataNascimento,!1),await h.atualizar(e.usuario),M('Usuario atualizado'),c.value=!1,setTimeout(()=>{u()},200)}catch{x('Não foi possivel salvar as alterações')}finally{t.value=!1}}},f=async()=>{n.value?await j()&&l():l()},l=()=>{a.value=q(o.value),c.value=!1},u=async()=>{const e=y.value.id;t.value=!0;try{const _=await h.buscar(e);o.value=_.data.object.usuario,o.value.dataNascimento=b(o.value.dataNascimento),delete o.value.password,a.value=q(o.value)}catch{x('Não foi possivel carregar as informações')}finally{t.value=!1}};return C(()=>{u()}),{editando:c,loading:t,formulario:d,usuario:a,salvar:m,cancelar:f}}},F={class:'row justify-between q-pb-md'},H=v('span',{class:'text-h6 q-my-auto'},'Meu Cadastro',-1),O={class:'row'};function P(c,t,d,a,o,y){const n=S,m=U,f=z,l=A,u=R,e=E,_=D;return k(),B(_,{bordered:'',flat:''},{default:r(()=>[s(e,null,{default:r(()=>[v('div',F,[H,s(n,{color:'primary','icon-right':'edit',disable:a.editando,onClick:t[0]||(t[0]=G=>a.editando=!0)},{default:r(()=>[p(' Alterar ')]),_:1},8,['disable'])]),s(u,{ref:'formulario',class:'q-gutter-md',onSubmit:a.salvar,onReset:a.cancelar},{default:r(()=>[s(m,{usuario:a.usuario,readonly:!a.editando},null,8,['usuario','readonly']),s(f,{class:'q-my-md'}),v('div',O,[s(l),s(n,{flat:'',class:'q-mr-sm',disable:!a.editando,type:'reset'},{default:r(()=>[p(' Cancelar ')]),_:1},8,['disable']),s(n,{color:'primary','icon-right':'save',disable:!a.editando,type:'submit'},{default:r(()=>[p(' Salvar ')]),_:1},8,['disable'])])]),_:1},8,['onSubmit','onReset'])]),_:1})]),_:1})}const W=w(T,[['render',P]]);export{W as default}
