import{_ as h,r as n,z as b,k as v,A as w,s as r,n as q,B as S,q as s,C as V,m as f,D as C,E as N,F as I,G as P,H as k,x as A,y as B}from'./entry.262740d5.js';import{c as E,r as U,s as z,_ as D}from'./index.a988fc85.js';const F='/auth',G=E(F),H={login(o){return G.post('/login',o)}};const J={setup(){const o=n(null),a=n(null),m=n(null),e=n(!1),c=n(!1),l=n(!1),i=b(),p=async()=>{l.value||o.value.validate()&&await _()},_=async()=>{const d={username:a.value,password:m.value};l.value=!0;try{const t=await H.login(d);return c.value=!1,i.value=t.data,localStorage.setItem('userData',JSON.stringify(i.value)),q('/')}catch(t){t.response.status===401?c.value=!0:(console.error(t),z('Não foi possível realizar login'))}finally{l.value=!1}};return{formulario:o,invalidCredentials:c,name:a,password:m,showPassword:e,rules:U,loading:l,onSubmit:p}}},x=o=>(A('data-v-31cd9ef1'),o=o(),B(),o),O=x(()=>f('div',{class:'text-h6 row flex-center text-primary'},' AgendaApp ',-1)),T=x(()=>f('span',{class:'text-red q-my-auto'},'Nome ou senha incorreto',-1)),j={class:'row flex-center'};function K(o,a,m,e,c,l){const i=C,p=N,_=S,d=I,t=P,y=k,g=D;return v(),w(_,{id:'login-card'},{default:r(()=>[s(i,null,{default:r(()=>[O]),_:1}),s(p),s(i,{class:'q-px-md'},{default:r(()=>[e.invalidCredentials?(v(),w(_,{key:0,class:'invalid-credentials',flat:'',outline:''},{default:r(()=>[T]),_:1})):V('',!0),s(g,{ref:'formulario',class:'q-gutter-md q-mt-md',onSubmit:e.onSubmit},{default:r(()=>[s(d,{id:'username',modelValue:e.name,'onUpdate:modelValue':a[0]||(a[0]=u=>e.name=u),filled:'',label:'Nome *',rules:[e.rules.obrigatorio]},null,8,['modelValue','rules']),s(d,{id:'password',modelValue:e.password,'onUpdate:modelValue':a[2]||(a[2]=u=>e.password=u),filled:'',label:'Senha *',type:e.showPassword?'text':'password',rules:[e.rules.obrigatorio]},{append:r(()=>[s(t,{name:e.showPassword?'visibility_off':'visibility',class:'cursor-pointer',onClick:a[1]||(a[1]=u=>e.showPassword=!e.showPassword)},null,8,['name'])]),_:1},8,['modelValue','type','rules']),f('div',j,[s(y,{label:'Entrar',type:'submit',color:'primary',loading:e.loading,style:{width:'200px'}},null,8,['loading'])])]),_:1},8,['onSubmit'])]),_:1})]),_:1})}const Q=h(J,[['render',K],['__scopeId','data-v-31cd9ef1']]);export{Q as default}
