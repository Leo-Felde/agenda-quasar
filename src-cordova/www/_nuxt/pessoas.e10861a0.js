import{_ as k,r as d,o as C,k as w,l as V,q as a,s as n,A as E,M as N,C as D,v as b,m as v,t as p,G as S,F as A,H as B,x as I,y as z}from'./entry.262740d5.js';import{a as F,d as K}from'./promptDialog.55ad8c7a.js';import{m as M,_ as U,a as j,b as G,c as H}from'./DialogoPessoa.d9bc7f38.js';import{a as O}from'./DialogoCrud.b0f606bf.js';import{s as y,a as R}from'./index.a988fc85.js';import'./ClosePopup.8a3daebd.js';import'./QList.c13a3d38.js';const T=[{name:'nome',field:'nome',label:'Nome',align:'left',sortable:!0},{name:'cpf',field:'cpf',label:'Cpf',align:'left',sortable:!0},{name:'endereco',field:'endereco.bairro',label:'Endereço',align:'left',sortable:!0},{name:'actions',align:'center',label:'Ações'}],J={setup(){const t=d(''),s=d([]),_=d({endereco:{}}),o=d(!1),m=d(!1);C(()=>{c()});const x=l=>{_.value=l,m.value=!0},u=()=>{_.value={},m.value=!0},f=async()=>{if(await F('Excluir pessoa','Deseja excluir essa pessoa? Isso não pode ser revertido'))try{R('Pessoa excluída com sucesso'),c()}catch{y('Não foi possível excluir a pessoa')}finally{o.value=!1}},c=async(l=!1)=>{o.value=!0;try{const r={nome:l&&t.value||''},i=await M.pesquisar(r);s.value=i.data}catch(r){console.error(r),y('Não foi possível listar as pessoas')}finally{o.value=!1}};return{columns:T,search:t,showDialog:m,loading:o,pessoas:s,pessoaSelecionado:_,editarPessoa:x,novoPessoa:u,excluirPessoa:f,listarPessoas:c}}},L=t=>(I('data-v-839fb9f9'),t=t(),z(),t),Q=L(()=>v('span',{class:'text-h6 q-my-auto'},'Pessoas',-1));function W(t,s,_,o,m,x){const u=S,f=A,c=K,l=B,r=j,i=G,P=H,g=O,q=U;return w(),V('div',null,[a(g,{class:'sticky-header',flat:'',bordered:'',rows:o.pessoas,columns:o.columns,loading:o.loading,'row-key':'field',onRowClick:s[4]||(s[4]=(e,h)=>o.editarPessoa(h))},{top:n(()=>[Q,t.$q.screen.lt.md?D('',!0):(w(),E(f,{key:0,modelValue:o.search,'onUpdate:modelValue':s[1]||(s[1]=e=>o.search=e),class:'q-ml-sm',rounded:'',standout:'',dense:'',clearable:'',placeholder:'Pesquisar',onKeyup:s[2]||(s[2]=N(e=>o.listarPessoas(!0),['enter'])),onClear:s[3]||(s[3]=e=>o.listarPessoas())},{append:n(()=>[a(u,{name:'search',class:'cursor-pointer',onClick:s[0]||(s[0]=e=>o.listarPessoas(!0))})]),_:1},8,['modelValue'])),a(c),a(l,{color:'primary','icon-right':'add',onClick:o.novoPessoa},{default:n(()=>[b(' Novo pessoa ')]),_:1},8,['onClick'])]),'body-cell-nome':n(e=>[a(i,{props:e},{default:n(()=>[v('div',null,[a(r,{id:e.row.id},null,8,['id']),b(' '+p(e.row.nome),1)])]),_:2},1032,['props'])]),'body-cell-endereco':n(e=>[a(i,{props:e},{default:n(()=>[v('div',null,p(e.row.endereco.bairro)+', '+p(e.row.endereco.cidade)+' - '+p(e.row.endereco.estado),1)]),_:2},1032,['props'])]),'body-cell-actions':n(e=>[a(i,{props:e},{default:n(()=>[a(P,{row:e.row,onEditar:o.editarPessoa,onExcluir:o.excluirPessoa},null,8,['row','onEditar','onExcluir'])]),_:2},1032,['props'])]),_:1},8,['rows','columns','loading']),a(q,{modelValue:o.showDialog,'onUpdate:modelValue':s[5]||(s[5]=e=>o.showDialog=e),pessoa:o.pessoaSelecionado,onAtualizar:o.listarPessoas},null,8,['modelValue','pessoa','onAtualizar'])])}const ao=k(J,[['render',W],['__scopeId','data-v-839fb9f9']]);export{ao as default}
